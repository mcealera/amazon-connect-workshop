{"modules":[{"id":"5d00bf05-4fb7-4e29-9e03-d737398685a6","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1541,"y":181}}},{"id":"3e0c5b14-7a4f-40ee-924a-3ee12d8cf186","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"46853b87-c98e-4b4e-b8e4-23fe2a5e9d94"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":23,"y":206}}},{"id":"46853b87-c98e-4b4e-b8e4-23fe2a5e9d94","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"7f7b5cf7-cd21-44e1-a377-5b666ad84575"},{"condition":"Error","transition":"9d801614-ca63-4335-ae5d-5dd88b5a5542"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:237336113447:function:getCustomer2","namespace":null},{"name":"TimeLimit","value":"8"}],"metadata":{"position":{"x":250,"y":16},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"9d801614-ca63-4335-ae5d-5dd88b5a5542","type":"GetUserInput","branches":[{"condition":"Timeout","transition":"2af1fea8-0bf9-472e-9b87-66ad90127199"},{"condition":"NoMatch","transition":"2af1fea8-0bf9-472e-9b87-66ad90127199"},{"condition":"Error","transition":"829acf4a-8ed1-4e07-8d2c-0207b293702e"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"2af1fea8-0bf9-472e-9b87-66ad90127199"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"b1a60c57-f2f4-4aae-882f-a3ab9f2d1f21"}],"parameters":[{"name":"Text","value":"Press 1 for English. Press 2 for Spanish.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":39,"y":427},"conditionMetadata":[{"id":"89cf8200-7c01-4c18-acbb-e492a90cd278","value":"1"},{"id":"0a7d60a6-6955-4a64-9f4c-0863c6caadb0","value":"2"}],"useDynamic":false},"target":"Digits"},{"id":"c32e75f4-9761-4c2b-8288-83f9e3d0336b","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dc193dd2-f7d2-4c6b-a767-7bd6fe43cd07"}],"parameters":[{"name":"Text","value":"Hello $.External.name","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":709,"y":186},"useDynamic":false}},{"id":"30087482-c8ad-4961-a540-882e01427362","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9d801614-ca63-4335-ae5d-5dd88b5a5542"}],"parameters":[{"name":"Text","value":"Hello $.External.name","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":708,"y":345},"useDynamic":false}},{"id":"141273a4-a1e9-4e56-a8df-26611c53f55d","type":"PlayPrompt","branches":[{"condition":"Success","transition":"5d00bf05-4fb7-4e29-9e03-d737398685a6"}],"parameters":[{"name":"Text","value":"I'm sorry. It seems our queue is at capacity. Try again later","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1508,"y":1},"useDynamic":false}},{"id":"bf00d79d-53c3-4510-bb41-aa7868164f01","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"141273a4-a1e9-4e56-a8df-26611c53f55d"},{"condition":"Error","transition":"829acf4a-8ed1-4e07-8d2c-0207b293702e"}],"parameters":[],"metadata":{"position":{"x":1275,"y":3},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"9972b0d8-feca-477d-8324-932d2c75243c","type":"SetQueue","branches":[{"condition":"Success","transition":"bf00d79d-53c3-4510-bb41-aa7868164f01"},{"condition":"Error","transition":"829acf4a-8ed1-4e07-8d2c-0207b293702e"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:237336113447:instance/512cdf21-88b7-4ae0-aae1-875f6130d6f6/queue/93695652-16a9-4ba2-9f09-c52c892d8747","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":1044,"y":201},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:237336113447:instance/512cdf21-88b7-4ae0-aae1-875f6130d6f6/queue/93695652-16a9-4ba2-9f09-c52c892d8747","text":"BasicQueue"}}},{"id":"829acf4a-8ed1-4e07-8d2c-0207b293702e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"5d00bf05-4fb7-4e29-9e03-d737398685a6"}],"parameters":[{"name":"Text","value":"I'm sorry. It seems our queue is at capacity. Try again later","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1264,"y":890},"useDynamic":false}},{"id":"2af1fea8-0bf9-472e-9b87-66ad90127199","type":"SetAttributes","branches":[{"condition":"Success","transition":"1585bc67-f7bc-491e-ac6e-68b92d36b1f7"},{"condition":"Error","transition":"829acf4a-8ed1-4e07-8d2c-0207b293702e"}],"parameters":[{"name":"Attribute","value":"english","key":"intent","namespace":null}],"metadata":{"position":{"x":307,"y":427}}},{"id":"b1a60c57-f2f4-4aae-882f-a3ab9f2d1f21","type":"SetAttributes","branches":[{"condition":"Success","transition":"1585bc67-f7bc-491e-ac6e-68b92d36b1f7"},{"condition":"Error","transition":"829acf4a-8ed1-4e07-8d2c-0207b293702e"}],"parameters":[{"name":"Attribute","value":"spanish","key":"intent","namespace":null}],"metadata":{"position":{"x":296,"y":691}}},{"id":"1585bc67-f7bc-491e-ac6e-68b92d36b1f7","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"dc193dd2-f7d2-4c6b-a767-7bd6fe43cd07"},{"condition":"Error","transition":"829acf4a-8ed1-4e07-8d2c-0207b293702e"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:237336113447:function:updateCustomer","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"intent","value":"intent","namespace":"User Defined"}],"metadata":{"position":{"x":580,"y":546},"dynamicMetadata":{"intent":true},"useDynamic":false},"target":"Lambda"},{"id":"dc193dd2-f7d2-4c6b-a767-7bd6fe43cd07","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9972b0d8-feca-477d-8324-932d2c75243c"}],"parameters":[{"name":"Text","value":"I'm putting you in the queue","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1034,"y":6},"useDynamic":false}},{"id":"7f7b5cf7-cd21-44e1-a377-5b666ad84575","type":"CheckAttribute","branches":[{"condition":"NoMatch","transition":"30087482-c8ad-4961-a540-882e01427362"},{"condition":"Evaluate","conditionType":"Contains","conditionValue":"spanish","transition":"71da2fb3-95bf-4888-ab12-d312a176b7c0"},{"condition":"Evaluate","conditionType":"Contains","conditionValue":"english","transition":"c32e75f4-9761-4c2b-8288-83f9e3d0336b"}],"parameters":[{"name":"Attribute","value":"lastIntent"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":472,"y":19},"conditionMetadata":[{"id":"135902dd-a9b1-4447-acea-e420c2cdceff","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"spanish"},{"id":"acc596ec-c09b-489a-9584-c34767a2b6ee","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"english"}]}},{"id":"71da2fb3-95bf-4888-ab12-d312a176b7c0","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dc193dd2-f7d2-4c6b-a767-7bd6fe43cd07"}],"parameters":[{"name":"Text","value":"<speak> <lang xml:lang=\"es-ES\">Buenos Dias </lang><break time=\"1s\"/>$.External.name </speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"}],"metadata":{"position":{"x":707,"y":23},"useDynamic":false}}],"version":"1","type":"contactFlow","start":"3e0c5b14-7a4f-40ee-924a-3ee12d8cf186","metadata":{"entryPointPosition":{"x":20,"y":20},"snapToGrid":false,"name":"TransferToQueue","description":null,"type":"contactFlow","status":"published","hash":"b408eca6751bc60581fa1e94d03cc4e1e994760322482a43f18150d4eb0a4edc"}}